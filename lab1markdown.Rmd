---
title: "lab1markdown"
author: "Jimmy, Gabrielle, and Zev"
date-format: short 
format: 
  pdf: 
    documentclass: scrartcl
    classoption: onecolumn
editor: visual
output: html_document
---

---
title: "Lab 1"
author: "Jimmy, Gabrielle, and Zev" 
date: "`r Sys.Date()`"
date-format: short 
format: 
  pdf: 
    documentclass: scrartcl
    classoption: onecolumn
editor: visual
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r load packages, include=FALSE}
library(tidyverse) 
library(stats)
renv::snapshot()
```

```{r set options, include=FALSE}
theme_set(theme_bw())
knitr::opts_chunk$set(echo=FALSE, message=FALSE)
```

```{r load data}
anes <- read_csv(("anes_timeseries_2024_csv_20250430.csv"))
```

```{r}
anes = anes %>% 
  filter( V241264 %in% c(1,2,3) ) %>% 
  filter(V241261 %in% c(1,2,3)) #filter out unknown values
anes$public_schools <- c(1,3,2)[anes$V241264] #recode public schools
anes$social_security<- c(1,3,2)[anes$V241261] #recode social security so 1 = increase, 2= same, 3 = decrease
anes$Difference = anes$public_schools - anes$social_security

#Split into democrats and republicans according to party affiliation summary variable
democrats = anes %>% filter(V241227x %in% c(1,2,3))
republicans = anes %>% filter(V241227x %in% c(5,6, 7))

#Create histograms of difference by each partty
hist(democrats$Difference, breaks = 20)
mean(democrats$Difference) #-0.17
median(democrats$Difference) #0
hist(republicans$Difference, breaks = 20)
mean(republicans$Difference) # 0.14
median(republicans$Difference) #0

```

```{r}
#Wilcoxon signed rank test for Democrats
#Alternative hypothesis is public school response < social security response
#ie public school support > social security support
wilcox.test(democrats$public_schools, democrats$social_security, paired = TRUE, alternative = "less")

#Wilcoxon signed rank test for republicans
#Alternative hypothesis is public school response > social security response
#ie public school response < social security response
wilcox.test(republicans$public_schools, republicans$social_security, paired = TRUE, alternative = "greater")
```

#Alternative hypothesis is public school \< social security

```{r}
#Sign test for democrats
#Alternative hypothesis is public school response  < social security 
#Alternative hypothesis is  public school support > social security support 
# Count number of negative differences

# Total number of non-zero (non-tied) differences
binom.test(sum(democrats$Difference < 0, na.rm = TRUE), n = sum(democrats$Difference != 0, na.rm = TRUE), p = 0.5, alternative = "greater")


#Sign test for republicans
#Alternative hypothesis is public school response  > social security 
#ie public school support < social security support
binom.test(sum(republicans$Difference > 0, na.rm = TRUE), n = sum(republicans$Difference != 0, na.rm = TRUE), p = 0.5, alternative = "greater")

```

\newpage

# Introduction

We suspect that Democrats will favor increasing spending in public schools more than social security. Whereas Republicans will be the other way around. So we will set up two hypothesis test using the Wilcoxon Signed Rank test.

\

Test set up:

Let Xi​ = preference for **public school spending (**V241264)**, where:**

-   1 = Increased

-   2 = Kept the same

-   3 = Decreased

\

Let Yi​ = preference for **social security spending (**V241261)**,** with the same code as Xi

Let Di = Xi - Yi, with interpretation:

-   -2 represents public schools =1 (Increase) **vs.** social security =3 (Decrease): extremely more support for schools

-   -1 represents public schools =1 (Increase) **vs.** social security =2 (Same), **or** public schools =2 (Same) **vs.** social security =3 (Dec): more support for schools

-   0 represents public schools and social security  coded the same: equal support (both Increase, both Same, or both Decrease)

-   1 represents public schools =2 (Same) **vs.** social security =1 (Increase), **or** public schools =3 (Dec) **vs.** social security =2 (Same): more support for Social Security

-   2 represents public schools =3 (Decrease) **vs.** social security =1 (Increase): extremely more support for Social Security

**Test 1:**

Null hypothesis (Ho): average Di \| i in Democrats = 0

Alternative hypothesis (H1): average Di \| i in Democrats \< 0 , favoring public schools

**Test 2:\
** Null hypothesis (Ho): average Di \| i in Republicans = 0

Alternative hypothesis (H1): average Di \| i in Republicans \> 0 , favoring social security

\
\

# Data and Methodology

# Results

# Discussion
